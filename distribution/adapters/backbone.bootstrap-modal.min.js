(function(a,b,c){var d=b.templateSettings;b.templateSettings={interpolate:/\{\{(.+?)\}\}/g,evaluate:/<%([\s\S]+?)%>/g};var e=b.template('    <% if (title) { %>      <div class="modal-header">        <% if (allowCancel) { %>          <a class="close">Ã—</a>        <% } %>        <h3>{{title}}</h3>      </div>    <% } %>    <div class="modal-body"><p>{{content}}</p></div>    <div class="modal-footer">      <% if (allowCancel) { %>        <a href="#" class="btn cancel">{{cancelText}}</a>      <% } %>      <a href="#" class="btn ok btn-primary">{{okText}}</a>    </div>  ');b.templateSettings=d;var f=c.View.extend({className:"modal",events:{"click .close":function(a){a.preventDefault(),this.trigger("cancel"),this.close()},"click .cancel":function(a){a.preventDefault(),this.trigger("cancel"),this.close()},"click .ok":function(a){a.preventDefault(),this.trigger("ok"),this.close()}},initialize:function(a){this.options=b.extend({title:null,okText:"OK",cancelText:"Cancel",allowCancel:!0,escape:!0,animate:!1,template:e},a)},render:function(){var a=this.$el,b=this.options,c=b.content;a.html(b.template(b));var d=this.$content=a.find(".modal-body p");return c.$el&&a.find(".modal-body p").html(c.render().$el),b.animate&&a.addClass("fade"),this.isRendered=!0,this},open:function(){this.isRendered||this.render();var b=this.$el;b.modal({keyboard:this.options.allowCancel,backdrop:this.options.allowCancel?!0:"static"}),b.on("shown",function(){b.find(".btn.ok").focus(),b.off("shown",this)});var c=f.count,d=a(".modal-backdrop:eq("+c+")"),e=d.css("z-index"),g=d.css("z-index");return d.css("z-index",e+c),this.$el.css("z-index",g+c),f.count++,this},close:function(){var a=this,c=this.$el;if(this._preventClose){this._preventClose=!1;return}c.modal("hide"),c.one("hidden",b.bind(this.remove,this)),f.count--},preventClose:function(){this._preventClose=!0}},{count:0});typeof require=="function"&&module&&exports&&(module.exports=f);if(typeof define=="function"&&define.amd)return define(function(){return f});c.BootstrapModal=f})(jQuery,_,Backbone)